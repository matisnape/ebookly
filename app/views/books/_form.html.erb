<div>
  <%= render 'shared/error_messages', object: @book %>

  <%= form_with model: @book, local: true do |form| %>
    <%= form.label :title %>
    <%= form.text_field :title %>
    <br>
    <%= form.label :author_id %>
    <%= form.collection_select(:author_id, @authors, :id, :display_name, prompt: true) %>
    <p>Or create new:</p>
    <%= form.fields_for :author, @book.author do |ff| %>
      <div>
        <%= ff.label :last_name %>
        <%= ff.text_field :last_name %>
        <%= ff.label :first_name %>
        <%= ff.text_field :first_name %>
      </div>
    <% end %>
    <br>
    <%= form.label :shop_id %>
    <%= form.collection_select(:shop_id, @shops, :id, :display_name) %>
    <br>
    <%= form.submit "Submit" %>
  <% end %>
</div>

